{"version":3,"sources":["api/base.js","utils/http.js","api/index.js","pages/Article/index.js"],"names":["base","link","instance","axios","create","defaults","headers","post","interceptors","request","use","config","error","Promise","reject","response","getNews","get","getOlds","time","getAction","id","getLongComment","getShortComment","Article","state","detail","content","React","createRef","this","props","match","params","then","res","setState","data","collects","addCollect","delCollect","body","current","innerHTML","className","css","rel","href","src","image","alt","title","style","backgroundImage","image_hue","slice","image_source","ref","onClick","history","go","push","some","value","Component","connect","getCollects","dispatch","addCollectAction","delCollectAction"],"mappings":"2RAKA,IAIeA,EAJF,CACTC,KAAM,W,iBCEJC,EAAWC,IAAMC,SAEvBF,EAASG,SAASC,QAAQC,KAAK,gBAC3B,oCAGJJ,IAAMK,aAAaC,QAAQC,KACvB,SAASC,GAEL,OAAOA,KAEX,SAASC,GAEL,OAAOC,QAAQC,OAAOF,MAK9BT,IAAMK,aAAaO,SAASL,KACxB,SAASK,GAEL,OAAOA,KAEX,SAASH,GAEL,OAAOC,QAAQC,OAAOF,MAIfV,QC5BFc,EAAU,kBAAMb,EAAMc,IAAN,UAAajB,EAAKC,KAAlB,oBAGhBiB,EAAU,SAAAC,GAAI,OAAIhB,EAAMc,IAAN,UAAajB,EAAKC,KAAlB,0BAAwCkB,KAG1DC,EAAY,SAAAC,GAAE,OAAIlB,EAAMc,IAAN,UAAajB,EAAKC,KAAlB,iBAA+BoB,KAGjDC,EAAiB,SAAAD,GAAE,OAAIlB,EAAMc,IAAN,UAAajB,EAAKC,KAAlB,iBAA+BoB,EAA/B,oBAGvBE,EAAkB,SAAAF,GAAE,OAAIlB,EAAMc,IAAN,UAAajB,EAAKC,KAAlB,iBAA+BoB,EAA/B,sB,gJCV/BG,E,kDACF,aAAe,IAAD,8BACV,gBACKC,MAAQ,CACTC,OAAQ,IAEZ,EAAKC,QAAUC,IAAMC,YALX,E,gEAQO,IAAD,OAERR,EAAOS,KAAKC,MAAMC,MAAMC,OAAxBZ,GACRD,YAAUC,GAAIa,MAAK,SAAAC,GACf,EAAKC,SAAS,CACVV,OAAQS,EAAIE,Y,+BAOd,IAAD,OACGhB,EAAOS,KAAKC,MAAMC,MAAMC,OAAxBZ,GACAK,EAAWI,KAAKL,MAAhBC,OAFH,EAGwCI,KAAKC,MAA1CO,EAHH,EAGGA,SAAUC,EAHb,EAGaA,WAAYC,EAHzB,EAGyBA,WAG9B,OAFId,EAAOe,OAAMX,KAAKH,QAAQe,QAAQC,UAAYjB,EAAOe,MAGrD,yBAAKG,UAAU,WACVlB,EAAOmB,IAAM,0BAAMC,IAAI,aAAaC,KAAMrB,EAAOmB,IAAI,KAAS,KAE/D,yBAAKD,UAAU,kBACX,yBAAKA,UAAU,cACX,yBAAKI,IAAKtB,EAAOuB,MAAOC,IAAKxB,EAAOyB,QACpC,yBACIP,UAAU,oBACVQ,MAAO,CACHC,gBAAgB,4CAAD,OAA8C3B,EAAO4B,WAAa5B,EAAO4B,UAAUC,MAAM,GAAzF,WAGnB,yBAAKX,UAAU,sBACX,4BAAKlB,EAAOyB,OACZ,6BAAMzB,EAAO8B,iBAIzB,yBAAKZ,UAAU,iBAAiBa,IAAK3B,KAAKH,WAE9C,yBAAKiB,UAAU,gBACX,yBAAKA,UAAU,aACX,uBAAGA,UAAU,uBAAuBc,QAAS,kBAAM,EAAK3B,MAAM4B,QAAQC,IAAI,OAE9E,yBAAKhB,UAAU,gBACX,uBAAGA,UAAU,wBAAwBc,QAAS,kBAAM,EAAK3B,MAAM4B,QAAQE,KAAK,YAAcxC,MAC1F,mCAEJ,yBAAKuB,UAAU,aACX,uBAAGA,UAAU,uBACb,qCAEJ,yBAAKA,UAAU,cACVN,EAASwB,MAAK,SAAAC,GAAK,OAAIA,EAAM1C,KAAOK,EAAOL,MACxC,uBAAGuB,UAAU,2BAA2Bc,QAAS,kBAAMlB,EAAWd,EAAOL,OAEzE,uBAAGuB,UAAU,sBAAsBc,QAAS,kBAAMnB,EAAWb,OAGrE,yBAAKkB,UAAU,cACX,uBAAGA,UAAU,+B,GApEfoB,aAmFPC,uBAPS,SAAAxC,GAAK,MAAK,CAAEa,SAAU4B,YAAYzC,OAE/B,SAAA0C,GAAQ,MAAK,CACpC5B,WAAY,SAAAb,GAAM,OAAIyC,EAASC,YAAiB1C,KAChDc,WAAY,SAAAnB,GAAE,OAAI8C,EAASE,YAAiBhD,QAGjC4C,CAA6CzC","file":"static/js/8.d23aa652.chunk.js","sourcesContent":["/**\r\n * @author City\r\n * @description 接口域名管理\r\n */\r\n\r\nconst base = {\r\n    link: \"/api/4/\"\r\n};\r\n\r\nexport default base;\r\n","/**\r\n * @author City\r\n * @description axios封装，请求拦截、响应拦截、错误统一处理\r\n */\r\n\r\nimport axios from \"axios\";\r\n\r\n// 创建axios实例\r\nconst instance = axios.create();\r\n// 设置post请求头\r\ninstance.defaults.headers.post[\"Content-Type\"] =\r\n    \"application/x-www-form-urlencoded\";\r\n\r\n// 添加请求拦截器\r\naxios.interceptors.request.use(\r\n    function(config) {\r\n        // 在发送请求之前做些什么\r\n        return config;\r\n    },\r\n    function(error) {\r\n        // 对请求错误做些什么\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 添加响应拦截器\r\naxios.interceptors.response.use(\r\n    function(response) {\r\n        // 对响应数据做点什么\r\n        return response;\r\n    },\r\n    function(error) {\r\n        // 对响应错误做点什么\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance;\r\n","/**\r\n * @author City\r\n * @description api接口的通一出口\r\n */\r\n\r\nimport base from \"./base\";\r\nimport axios from \"../utils/http\";\r\n\r\n// 最新新闻\r\nexport const getNews = () => axios.get(`${base.link}stories/latest`);\r\n\r\n// 之前新闻\r\nexport const getOlds = time => axios.get(`${base.link}stories/before/${time}`);\r\n\r\n// 文章详情\r\nexport const getAction = id => axios.get(`${base.link}story/${id}`);\r\n\r\n// 长评\r\nexport const getLongComment = id => axios.get(`${base.link}story/${id}/long-comments`);\r\n\r\n// 短评\r\nexport const getShortComment = id => axios.get(`${base.link}story/${id}/short-comments`);\r\n","/**\r\n * @author City\r\n * @description 文章详情\r\n */\r\n\r\nimport React, { Component } from \"react\";\r\nimport \"./main.css\";\r\nimport { getAction } from \"../../api/index\";\r\nimport { connect } from \"react-redux\";\r\nimport { getCollects, addCollectAction, delCollectAction } from \"../../store/modules/collect\";\r\n\r\nclass Article extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            detail: {}\r\n        };\r\n        this.content = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        /* 请求数据 */\r\n        const { id } = this.props.match.params;\r\n        getAction(id).then(res => {\r\n            this.setState({\r\n                detail: res.data\r\n            });\r\n        });\r\n    }\r\n\r\n    /* Method */\r\n\r\n    render() {\r\n        const { id } = this.props.match.params;\r\n        const { detail } = this.state;\r\n        const { collects, addCollect, delCollect } = this.props;\r\n        if (detail.body) this.content.current.innerHTML = detail.body;\r\n\r\n        return (\r\n            <div className=\"article\">\r\n                {detail.css ? <link rel=\"stylesheet\" href={detail.css[0]} /> : null}\r\n\r\n                <div className=\"article-detail\">\r\n                    <div className=\"detail-img\">\r\n                        <img src={detail.image} alt={detail.title} />\r\n                        <div\r\n                            className=\"detail-img-shadow\"\r\n                            style={{\r\n                                backgroundImage: `linear-gradient(rgba(255, 255, 255, 0), #${detail.image_hue && detail.image_hue.slice(2)} 60%)`\r\n                            }}\r\n                        >\r\n                            <div className=\"img-shadow-content\">\r\n                                <h2>{detail.title}</h2>\r\n                                <div>{detail.image_source}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"detail-content\" ref={this.content}></div>\r\n                </div>\r\n                <div className=\"article-menu\">\r\n                    <div className=\"menu-back\">\r\n                        <i className=\"iconfont icon-toleft\" onClick={() => this.props.history.go(-1)}></i>\r\n                    </div>\r\n                    <div className=\"menu-comment\">\r\n                        <i className=\"iconfont icon-comment\" onClick={() => this.props.history.push(\"/comment/\" + id)}></i>\r\n                        <em>82</em>\r\n                    </div>\r\n                    <div className=\"menu-like\">\r\n                        <i className=\"iconfont icon-like\"></i>\r\n                        <em>1234</em>\r\n                    </div>\r\n                    <div className=\"menu-favor\">\r\n                        {collects.some(value => value.id === detail.id) ? (\r\n                            <i className=\"iconfont icon-favor-fill\" onClick={() => delCollect(detail.id)}></i>\r\n                        ) : (\r\n                            <i className=\"iconfont icon-favor\" onClick={() => addCollect(detail)}></i>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"menu-share\">\r\n                        <i className=\"iconfont icon-share\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({ collects: getCollects(state) });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    addCollect: detail => dispatch(addCollectAction(detail)),\r\n    delCollect: id => dispatch(delCollectAction(id))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);\r\n"],"sourceRoot":""}